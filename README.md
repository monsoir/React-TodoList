# Todo List

ä½¿ç”¨äº†

- react
- react-redux

å¯è¿è¡Œ Demo åœ°å€ï¼š[ğŸ”—ğŸ”—ğŸ”—](https://monsoir.github.io/React-TodoList/)

æ ·å¼é‡‡ç”¨ CSS in JS çš„æ–¹å¼ç¼–å†™ï¼Œæœ¬æ¥å†™çš„æ˜¯ React Native, ä¹ æƒ¯äº† CSS in JS çš„æ ·å¼ç¼–å†™æ–¹æ³•ï¼›åŒæ—¶ï¼ŒCSS in JS ä¹Ÿå¾ˆå¥½åœ°é¿å…äº† CSS æ–‡ä»¶æ··ä¹±ï¼Œæ ·å¼åº”ç”¨æ—¶æ•ˆæœä¹±çªœã€‚

## å…³äº Redux çš„è¿›ä¸€æ­¥è®¤è¯†

### ä» store ä¸­è·å– state

å½“æˆ‘ä»¬ä½¿ç”¨äº† `combineReducers` æ¥å°†å¤šä¸ª Reducer åˆå¹¶æ—¶ï¼Œéœ€è¦æ³¨æ„ï¼Œå½“æˆ‘ä»¬æƒ³ä» store ä¸­æ‹¿åˆ° state æ—¶ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦æ‹¿åˆ°æŸä¸ª reducer, å†é€šè¿‡è¿™ä¸ª reducer å»æ‹¿åˆ° state

### state çš„åˆå§‹åŒ–

å½“æˆ‘éœ€è¦éœ€è¦ä¸€ä¸ªåˆå§‹åŒ–çš„ state æ—¶ï¼Œæˆ‘é™·å…¥äº†ç–‘æƒ‘ï¼Œè¿™ä¸ª state çš„åˆå§‹çŠ¶æ€ç©¶ç«Ÿéœ€è¦ä»å“ªé‡Œå®šä¹‰ï¼Ÿ

- å®šä¹‰ reducer æ–¹æ³•æ—¶èµ‹äºˆä¸€ä¸ªé»˜è®¤å€¼ï¼Ÿ
- åˆ›å»º store æ—¶åŒæ—¶èµ‹å€¼ï¼Ÿ

[ğŸ‘‰ é—®é¢˜çš„ç­”æ¡ˆ](https://stackoverflow.com/questions/33749759/read-stores-initial-state-in-redux-reducer/33791942#33791942)

ç®€å•æ¥è¯´ï¼š

1. state çš„åˆå§‹çŠ¶æ€æ˜¯éœ€è¦åœ¨ reducer å‡½æ•°å®šä¹‰æ—¶èµ‹äºˆä¸€ä¸ªé»˜è®¤å€¼çš„
2. åŒæ—¶ï¼Œå¯ä»¥åœ¨åˆ›å»º store æ—¶ï¼Œé€šè¿‡èµ‹äºˆ state å€¼æ¥è¦†ç›–ä¹‹å‰çš„é»˜è®¤å€¼

è¿™æ ·çš„ä½œç”¨æ˜¯ï¼š

- ç¬¬ä¸€æ­¥æ˜¯ä½¿å¾— app èƒ½å¤Ÿåœ¨ä¸€å¼€å§‹çš„æ—¶å€™é¡ºåˆ©è¿è¡Œï¼Œè€Œä¸è‡´äºå› ä¸ºæ•°æ®é—®é¢˜è€Œäº§ç”Ÿå¼‚å¸¸
- ç¬¬äºŒæ­¥çš„ä½œç”¨æ˜¯ï¼Œä½¿å¾—æˆ‘ä»¬åœ¨ app çš„åˆå§‹åŒ–å·¥ä½œåï¼Œè¿˜æœ‰æœºä¼šå¯¹åˆå§‹æ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œä¾‹å¦‚
    - æœ¬ app ä¸­ï¼Œä» localStorage ä¸­è·å–ä¹‹å‰å­˜å‚¨çš„ todo
    - å¦å¤–ï¼Œä¹Ÿå¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œå°†è·å¾—çš„æ•°æ®è¦†ç›–åˆšæ‰çš„åˆå§‹åŒ–æ•°æ®

## ç¼–å†™ä¸­é—´ä»¶

### å­˜å‚¨ä¸­é—´ä»¶

å¯¹ Todo çš„ä¿å­˜ä½¿ç”¨äº† `localStorage` ä¿å­˜åœ¨æµè§ˆå™¨ä¸­ï¼Œè¿™é‡Œç¼–å†™äº†ä¸€ä¸ªä¸­é—´ä»¶ `src/dataControl/myMiddleware/storager.js` æ¥è¿›è¡Œå¤„ç†

ä¸­é—´ä»¶å®è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸€ä¸ªç¨å¾®å¤æ‚äº†ä¸€ç‚¹çš„å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å‡½æ•°æœ‰ 3 ä¸ªå‚æ•°å¯ä¾›ä½¿ç”¨:

- store ç”¨æ¥è·å–æ•´ä¸ª state æ ‘ï¼Œå¹¶ä»ä¸­è·å–åˆ°éœ€è¦çš„æ•°æ® `store.getState()`
- next ç”¨äºè°ƒç”¨ä¸‹ä¸€ä¸ªä¸­é—´ä»¶
- action ä½¿ç”¨ redux æ—¶ï¼Œè°ƒé£çš„ action, å¯æ ¹æ® `action.type` å¯¹ action ç±»å‹è¿›è¡Œè¯†åˆ«ï¼Œè¿›è¡Œç‰¹æ®Šæ“ä½œ

> è¿™ 3 ä¸ªå‚æ•°å¹¶ä¸æ˜¯åƒå¹³å¸¸çš„å‡½æ•°å®šä¹‰é‚£æ ·å®šä¹‰ï¼Œè€Œæ˜¯é€šè¿‡è¿”å›äº†ä¸€ä¸ªåˆä¸€ä¸ªçš„å‡½æ•°æ¥å®ç°çš„ï¼Œç±»ä¼¼ Python ä¸­çš„ä¿®é¥°å™¨

åœ¨æœ€åï¼Œéœ€è¦è°ƒç”¨ `next(action)` æ¥å°†æ“ä½œæµè½¬åˆ°ä¸‹ä¸€ä¸ªä¸­é—´ä»¶

## ç»„ä»¶å°è£…

### æ–‡æœ¬èŠ‚ç‚¹çš„ä¼ æ‰¿

æœ‰æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªè‡ªå®šä¹‰çš„æ§ä»¶ï¼Œæˆ–è€…å¯¹åŸç”Ÿçš„æ§ä»¶è¿›è¡Œä¸€äº›è¿›ä¸€æ­¥çš„æ§åˆ¶ï¼Œä½†æ˜¯ï¼Œå¸Œæœ›è¿™ä¸ªæ§ä»¶çš„æ–‡æœ¬èŠ‚ç‚¹èƒ½å¤Ÿç»§ç»­ä¼ ä¸‹å»ï¼Œè€Œè¿™ä¸ªæ–‡æœ¬èŠ‚ç‚¹ï¼Œå°±æ˜¯ `props.children`, æœ‰ç‚¹å¥‡æ€ªã€‚

è§ `src/utils/UI/TouchableOpacity.js`

## äº‹ä»¶ç›‘å¬

### çª—å£å¤§å°å˜åŒ–ç›‘å¬

åœ¨ `src/MainContainer.js` ä¸­ï¼Œå¯¹çª—å£å¤§å°è¿›è¡Œäº†ç›‘å¬ï¼Œç¡¬å†™äº‹ä»¶å­—ç¬¦ä¸² `resize`

```js
componentDidMount() {
    window.addEventListener('resize', this.updateTodosHeight);
}

componentWillUnmount() {
    window.removeEventListener('resize', this.updateTodosHeight);
}
```

## CSS

### å¯¹ div è®¾ç½®æ»šåŠ¨

æœ‰æ—¶ï¼Œéœ€è¦å°†ä¸€ä¸ª div çš„å†…å®¹å±€é™åœ¨ä¸€å—å¤§å°å›ºå®šçš„åŒºåŸŸï¼Œä½†è¿™ä¸ª div ä¸­çš„å†…å®¹æ¯”è¾ƒå¤šï¼Œå¦‚ï¼Œä¸€ä¸ªåˆ—è¡¨ï¼Œè¿™æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªå†…åµŒçš„å¯æ»šåŠ¨çš„ div

è¿™ç§éœ€æ±‚ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® css å±æ€§ `{overflowX: 'scroll';}`, `{overflowY: 'scroll';}`, è¿˜æœ‰è®¾ç½® `height` æ¥å®ç°

## ESLint æŠ¥é”™å¤„ç†

- ä¸èƒ½åœ¨é `.jsx`  æ–‡ä»¶ä¸­ä½¿ç”¨ JSX

```js
"rules": {
    // `.jsx` extension cannot be used with React Native
    // https://github.com/airbnb/javascript/issues/982
    "react/jsx-filename-extension": ["error", { "extensions": [".js", ".jsx"] }]
},
```

- unexpected block statement surrounding arrow body jsx

```js
"rules": {
    "arrow-body-style": ["error", "always"]
},
```



